<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Aptitude Challenge</title>

    <style>
        /* ------------------- NEON CIRCUIT BACKGROUND ------------------- */
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: black;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.45);
            z-index: -1;
        }

        /* ------------------- UI STYLES ------------------- */
        body {
            margin: 0;
            font-family: "Orbitron", sans-serif;
            color: #00eaff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        .container,
        .welcome {
            width: 90%;
            max-width: 520px;
            background: rgba(15, 15, 20, 0.92);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            border: 2px solid #00eaff;
            box-shadow: 0 0 30px #00eaff;
            position: relative;
        }

        h2 {
            text-shadow: 0 0 15px #00eaff;
        }

        #mainTimer {
            font-size: 48px;
            font-weight: bold;
            color: #21f05f;
            text-shadow: 0 0 25px #48eb2b;
            margin-bottom: 20px;
        }

        input {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 2px solid #00eaff;
            background: #0d0d0d;
            color: #00eaff;
            font-size: 16px;
        }

        button {
            width: 100%;
            padding: 15px;
            margin-top: 15px;
            background: #00eaff;
            color: rgb(244, 245, 248);
            border: none;
            border-radius: 12px;
            font-size: 18px;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: bold;
        }

        button:hover {
            background: #04b2c2;
            color: white;
        }

        .progress-container {
            width: 100%;
            background: #222;
            border-radius: 10px;
            margin: 20px 0;
            height: 15px;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #00eaff, #ea2bff);
            border-radius: 10px;
        }

        #challenge {
            display: none;
        }

        #question {
            font-size: 26px;
            font-weight: bold;
            text-shadow: 0 0 10px #1dc0cf;
            margin-bottom: 15px;
        }
    </style>
</head>

<body>

    <!-- BACKGROUND CANVAS -->
    <canvas id="circuit"></canvas>

    <!-- WELCOME SCREEN -->
    <div class="welcome" id="welcomeScreen">
        <h2>Welcome to the Tech Aptitude Challenge!</h2>
        <p>7 Levels • Increasing Difficulty • One Total Timer</p>
        <button onclick="startChallenge()">Start Challenge</button>
    </div>

    <!-- GAME SCREEN -->
    <div class="container" id="challenge">
        <div id="mainTimer">0:00</div>

        <h2 id="title">Level 1</h2>

        <div class="progress-container">
            <div class="progress-bar" id="progress"></div>
        </div>

        <p id="question">Loading...</p>

        <input id="answer" placeholder="Enter answer">
        <button onclick="checkAnswer()">Submit</button>

        <p id="feedback"></p>
    </div>

    <script>
        /* ------------------ NEON CIRCUIT ANIMATION ------------------ */
        const canvasB = document.getElementById("circuit");
        const ctxB = canvasB.getContext("2d");

        canvasB.width = window.innerWidth;
        canvasB.height = window.innerHeight;

        let nodes = [];

        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        function createNodes() {
            for (let i = 0; i < 70; i++) {
                nodes.push({
                    x: random(0, canvasB.width),
                    y: random(0, canvasB.height),
                    size: random(2, 4),
                    vx: random(-0.6, 0.6),
                    vy: random(-0.6, 0.6),
                    glow: random(10, 25)
                });
            }
        }

        function drawNodes() {
            ctxB.clearRect(0, 0, canvasB.width, canvasB.height);

            for (let n of nodes) {
                ctxB.beginPath();
                ctxB.arc(n.x, n.y, n.size, 0, Math.PI * 2);
                ctxB.fillStyle = "#00eaff";
                ctxB.shadowBlur = n.glow;
                ctxB.shadowColor = "#00eaff";
                ctxB.fill();

                n.x += n.vx;
                n.y += n.vy;

                if (n.x < 0 || n.x > canvasB.width) n.vx *= -1;
                if (n.y < 0 || n.y > canvasB.height) n.vy *= -1;
            }

            connectNodes();
        }

        function connectNodes() {
            for (let a of nodes) {
                for (let b of nodes) {
                    let dist = Math.hypot(a.x - b.x, a.y - b.y);

                    if (dist < 140) {
                        ctxB.beginPath();
                        ctxB.moveTo(a.x, a.y);
                        ctxB.lineTo(b.x, b.y);
                        ctxB.strokeStyle = "rgba(0,255,255," + (1 - dist / 140) + ")";
                        ctxB.lineWidth = 1.2;
                        ctxB.stroke();
                    }
                }
            }
        }

        createNodes();
        setInterval(drawNodes, 30);

        /* ------------------ GAME LOGIC ------------------ */

        const levels = [
            {
                question: "Four friends — A, B, C, D — sit in a row facing forward.\nB sits to the right of A.\nC sits to the right of B but is not at an end.\nD does not sit next to A.\nWhat is the order from left to right?",
                answer: "DABC"
            },
            {
                question: "Decode the word:\nIf APPLE is coded as BQQMF (each letter +1), how is DOG coded?",
                answer: "EPH"
            },
            {
                question: "Five people sit in a row: P, Q, R, S, T.\nQ is immediately left of R.\nP sits at left end.\nS is to right of R.\nWho is at the right end?",
                answer: "T"
            },
            {
                question: "If 'CAT' = 312 and 'DOG' = 417,\nwhich number represents 'GOD'?",
                answer: "714"
            },
            {
                question: "Five chairs 1–5.\nA in 2.\nB right of A.\nC at an end.\nD left of B.\nWho sits in chair 5?",
                answer: "C"
            },
            {
                question: "Sequence: 2, 4, 6, 8, ? — What comes next?",
                answer: "10"
            },
            {
                question: "Find the odd one out:\nApple, Banana, Carrot, Mango",
                answer: "Carrot"
            }
        ];

        let currentLevel = 0;
        let totalStart;
        let mainTimerInterval;

        function startChallenge() {
            document.getElementById("welcomeScreen").style.display = "none";
            document.getElementById("challenge").style.display = "block";

            totalStart = new Date();
            mainTimerInterval = setInterval(updateMainTimer, 1000);

            loadLevel();
        }

        function updateMainTimer() {
            const diff = Math.floor((new Date() - totalStart) / 1000);
            const min = Math.floor(diff / 60);
            const sec = diff % 60;

            document.getElementById("mainTimer").textContent =
                `${min}:${sec < 10 ? "0" : ""}${sec}`;
        }

        function loadLevel() {
            document.getElementById("title").textContent = "Level " + (currentLevel + 1);
            document.getElementById("question").textContent = levels[currentLevel].question;
            document.getElementById("answer").value = "";
            document.getElementById("feedback").textContent = "";
        }

        function nextLevel() {
            currentLevel++;
            updateProgress();

            if (currentLevel >= levels.length) return endChallenge();

            loadLevel();
        }

        function updateProgress() {
            document.getElementById("progress").style.width =
                (currentLevel / levels.length) * 100 + "%";
        }

        function endChallenge() {
            clearInterval(mainTimerInterval);

            const totalSecs = Math.floor((new Date() - totalStart) / 1000);
            const min = Math.floor(totalSecs / 60);
            const sec = totalSecs % 60;

            document.getElementById("title").textContent = "Completed!";
            document.getElementById("question").textContent =
                `Total Time Taken: ${min}m ${sec}s`;

            document.getElementById("answer").style.display = "none";
            document.querySelector("button").style.display = "none";
        }

        function checkAnswer() {
            const input = document.getElementById("answer").value.trim();
            const correct = levels[currentLevel].answer;

            if (input.toUpperCase() === correct.toUpperCase()) {
                nextLevel();
            } else {
                document.getElementById("feedback").textContent = "Incorrect! Try again.";
            }
        }
    </script>

</body>

</html>
